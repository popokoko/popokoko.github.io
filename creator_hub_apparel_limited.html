<!DOCTYPE html>
<html lang="zh-Hant" class="scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PEACELOVE HUES | 聯名限定</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Cinzel:wght@400;700&display=swap"
        rel="stylesheet">
    <style>
        .font-luxury {
            font-family: 'Cinzel', serif;
        }

        .font-body {
            font-family: 'Inter', sans-serif;
        }

        .gold-text {
            background: linear-gradient(to bottom, #cfc09f 22%, #634f2c 24%, #cfc09f 26%, #cfc09f 27%, #ffecb3 40%, #3a2c0f 78%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
    </style>
</head>

<body class="font-body bg-black text-white">

    <header class="bg-black/90 backdrop-blur sticky top-0 z-50 border-b border-gray-800">
        <nav class="container mx-auto flex items-center justify-between h-20 px-6">
            <a href="creator_hub_apparel.html"
                class="text-gray-400 hover:text-white transition-colors text-sm tracking-widest">&larr; BACK</a>
            <div class="font-luxury font-bold text-xl tracking-widest text-white">LIMITED EDITION</div>
        </nav>
    </header>

    <section class="relative py-32 flex items-center justify-center">
        <div class="container mx-auto px-6 text-center relative z-10">
            <p class="text-sm tracking-[0.3em] text-gray-400 mb-4">EXCLUSIVE COLLABORATION</p>
            <h1 class="font-luxury text-5xl md:text-7xl font-bold mb-8 gold-text">PEACELOVE x CREATORS</h1>
            <p class="text-gray-400 max-w-xl mx-auto mb-10 font-light">融合藝術與時尚的巔峰之作。極限量發售，每一件都是獨一無二的收藏品。</p>
        </div>
        <div
            class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-yellow-600 rounded-full blur-[150px] opacity-20">
        </div>
    </section>

    <section class="py-8 border-t border-b border-gray-900 mb-12">
        <div class="container mx-auto px-6 flex justify-center gap-6 text-xs tracking-widest">
            <a href="creator_hub_apparel.html" class="text-gray-500 hover:text-white transition-colors">ALL</a>
            <a href="creator_hub_apparel_street.html"
                class="text-gray-500 hover:text-white transition-colors">STREET</a>
            <a href="creator_hub_apparel_minimal.html"
                class="text-gray-500 hover:text-white transition-colors">MINIMAL</a>
            <a href="creator_hub_apparel_limited.html" class="text-white border-b border-yellow-600 pb-1">LIMITED</a>
        </div>
    </section>

    <section class="pb-24">
        <div class="container mx-auto px-6">
            <div id="product-grid" class="grid md:grid-cols-2 gap-16">
                <div class="col-span-full text-center text-gray-500 py-12 font-luxury">Retrieving exclusive items...
                </div>
            </div>
        </div>
    </section>

    <footer class="bg-gray-800 text-gray-300 py-10 border-t border-gray-700 mt-auto">
        <div class="container mx-auto px-6 text-center">
            <p class="text-sm text-gray-500">&copy; 2025 PEACELOVE Inc.</p>
        </div>
    </footer>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, collection, onSnapshot, query, where } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        import { firebaseConfig } from "./config.js";
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const appId = 'peacelove';
        const productGrid = document.getElementById('product-grid');

        function startProductListener() {
            const productsRef = collection(db, 'artifacts', appId, 'public', 'data', 'products');
            const q = query(productsRef, where("category", "==", "limited"));

            onSnapshot(q, (snapshot) => {
                productGrid.innerHTML = '';
                if (snapshot.empty) {
                    productGrid.innerHTML = '<div class="col-span-full text-center text-gray-500 py-12 font-luxury">No exclusive items available.</div>';
                    return;
                }
                let products = [];
                snapshot.forEach((doc) => products.push(doc.data()));
                products.sort((a, b) => (b.timestamp?.seconds || 0) - (a.timestamp?.seconds || 0));

                products.forEach((p) => {
                    const btnAction = p.link ? `onclick="window.open('${p.link}', '_blank')"` : '';
                    const btnText = p.link ? 'SHOP NOW' : 'VIEW DETAILS';
                    const card = document.createElement('div');
                    card.className = 'group cursor-pointer dynamic-product';
                    if (p.link) card.setAttribute('onclick', `window.open('${p.link}', '_blank')`);

                    card.innerHTML = `
                        <div class="relative aspect-[16/9] overflow-hidden mb-6 border border-gray-800">
                            <img src="${p.image || 'https://placehold.co/1200x675/1a1a1a/gold?text=No+Image'}" alt="${p.name}" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-700 opacity-90 group-hover:opacity-100">
                            <div class="absolute top-4 left-4 bg-yellow-600 text-black text-xs font-bold px-3 py-1">NEW DROP</div>
                        </div>
                        <h3 class="font-luxury text-2xl mb-2 text-white group-hover:text-yellow-500 transition-colors">${p.name}</h3>
                        <p class="text-gray-500 text-sm mb-4">${p.description || ''}</p>
                        <div class="flex justify-between items-end"><p class="text-xl font-bold text-white">$${p.price}</p><button ${btnAction} class="text-yellow-600 text-sm tracking-widest border-b border-yellow-600 pb-1 hover:text-white hover:border-white transition-colors">${btnText}</button></div>
                    `;
                    productGrid.appendChild(card);
                });
            }, error => console.error(error));
        }
        // 智慧登入檢查
        import { onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        onAuthStateChanged(auth, (user) => {
            if (user) { startProductListener(); }
            else { signInAnonymously(auth).then(startProductListener); }
        });

        // 引入統一資安防護腳本 (Asset Protection & URL Masking)
    </script>
    <script src="js/guard.js"></script>
</body>

</html>
